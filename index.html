<!DOCTYPE html>
<html>
    <head>
        <title>Decouverte du langage Rust</title>
        <meta charset="utf-8">
        <link rel="stylesheet" href="res/milligram.min.css">
        <link rel="stylesheet" href="res/custom.css">
    </head>
    <body>
        <textarea id="source">
name: default
layout: true

---
class: center, middle

# Découverte du langage Rust

![Rust Logo](res/rust_logo.png)

Réalisé par _nanocryk <nanocryk+rust@pm.me>_ 

Présentation : https://nanocryk.github.io/ws-rust-bases/index.html  
Dépot GitHub : https://github.com/nanocryk/ws-rust-bases

---
template: default
layout: true

### Qu'est-ce que le Rust ?

---
## Présentation

- développé par Mozilla
- compilé
- statiquement et fortement typé
- paradigmes concurrents, fonctionnels et impératifs
- gère automatiquement l'allocation et libération de la mémoire
- n'utilise pas de garbage collector
- pas de *null pointer*, *use after free*, *double free*, ...
- pas de *data race* dans du code séquentiel comme concurrent

---
template: default
layout: true

### Installation

---
# Rustup

```
curl https://sh.rustup.rs -sSf | sh
```

- gère les toolchains (version du langage, stable/nightly, plateforme cible)
- installation de plugins du compilateur
- intègre cargo, gestionnaire de projets et de dépendances

> **Attention** : Bien s'assurer que `~/.cargo/bin` soit dans votre `PATH`.

Pour mettre à jour les toolchains :

```
rustup update
```

---
# IDE

## Visual Studo Code

-   Rust(rls) `rust-lang.rust`  
    Autocompletion, affichage des erreurs/warnings.
-   Better TOML `bungcip.better-toml`  
    Fichiers de configuration
-   crates `serayuzgur.crates`  
    Info sur les dépendances depuis le fichier de config
-   CodeLLDB `vadimcn.vscode-lldb`  
    Debugging

## IntelliJ

- Plugin Rust

---
## Quelques autres outils

### clippy

Pour avoir des suggestions de code plus idiomatique

```
rustup component add clippy
```

```
cargo fmt
```

### format

Pour suivre les conventions de style

```
rustup component add rustfmt
```

```
cargo clippy
```

---
template: default
layout: true

### Hello, world!

---
# Créer un projet

```
cargo new ws-hello-world
cd ws-hello-world
```

Le dossier contient les fichiers suivants :

```
Cargo.toml
src/
    main.rs
```

Compiler et lancer le projet :

```
cargo run
```

---
# Cargo.toml

```toml
[package]
# Nom du projet
name = "ws-hello-world"

# Version du projet
version = "0.1.0"

# Auteurs
authors = ["nanocryk <nanocryk+rust@pm.me>"]

# Edition de Rust (2018 ou 2015; 2015 si absent)
edition = "2018" 


# Liste des dépendances
[dependencies]
```

---
# main.rs

```rust
fn main() {
    println!("Hello, world!");
}
```

--
- `fn` permet de déclarer une fonction
- `main` est la fonction principale du programme
- `println!` permet d'afficher du texte
- `!` indique que l'on appelle une macro
- on ecrirait `println("Hello, world!")` si c'était une fonction

---
template: default
layout: true

### Concepts de bases

---
# Variables

Les variables sont déclarées avec le mot-clé `let` :

```rust
let ma_variable = 0;
```

De part son utilisation, Rust en déduit que c'est un nombre.

On peut donner explicitement le type de la variable :

```rust
let ma_variable: u32 = 0;
```

Les types de nombres sont :

- `u8`, `u16`, `u32`, `u64`, `u128` : nombre naturels
- `i8`, `i16`, `i32`, `i64`, `i128` : nombre entiers
- `f32`, `f64` : nombre réels
- `bool` : booléen, `true` ou `false`

---
# Mutabilité

Immutable par defaut.

```rust
let ma_variable = 0;
ma_variable = 42; // erreur de compilation
```

Le mot-clé `mut` permet de rendre une variable mutable :

```rust
let mut ma_variable = 0;
ma_variable = 42;
```

---
# Branchements

```rust
if ma_variable < 100 {
    // faire quelque chose
}
```

```rust
if ma_variable < 100 {
    // faire quelque chose
} else if ma_variable < 200 {
    // ou autre chose
} else {
    // sinon ça
}
```

> Pas de `()` autour de la condition, `{}` obligatoires.

---
# Expressions et instructions

Une expression peut retourner une valeur, une instruction non.  
Un `;` transforme une expression en instruction.  


--
Les blocs `if/else` sont des expressions, on peut donc faire :

```rust
let var2 = 18 + if ma_variable < 100 {
    42
} else {
    96
};
```

---
# Boucles

```rust
while ma_variable < 100 {
    // faire quelque chose
}
```

Une boucle infinie peut s'écrire

```rust
loop {
    // faire quelque chose
}
```

- `continue;` : passe au tour de boucle suivant
- `break;` : sort de la boucle

> Note : `break valeur;` permet de retourner une valeur en dehors de la boucle.
        </textarea>
        <script src="res/remark-latest.min.js">
        </script>
        <script>
            var slideshow = remark.create();
        </script>
    </body>
</html>